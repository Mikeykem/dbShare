<!doctype html>
<html lang="en" ng-app = "app">
<head>
    <meta charset="utf-8">

    <title>CodeMirror Example</title>
    <link rel="stylesheet" type="text/css" href="bower_components/codemirror/lib/codemirror.css">
    <link rel="stylesheet" type="text/css" href="css/docs.css"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="bower_components/codemirror/addon/hint/show-hint.css">
    <link rel="stylesheet" href="bower_components/codemirror/addon/fold/foldgutter.css">
    <link rel="stylesheet" href="bower_components/codemirror/theme/monokai.css">
</head>


<body>

<h1>Angular - UI - CodeMirror</h1>
<section ng-controller="CodemirrorCtrl">

    <textarea ui-codemirror="cmOption" ng-model="cmModel"></textarea>

    Mode : <select ng-model="mode" ng-options="m for m in modes" ng-change="modeChanged()"></select>

</section>

<!--script==================================================-->
<script src="js/angular.min.js"></script>
<script type="text/javascript" src="bower_components/codemirror/lib/codemirror.js"></script>
<script type="text/javascript" src="bower_components/angular-ui-codemirror/ui-codemirror.js"></script>
<script src="bower_components/codemirror/addon/hint/show-hint.js"></script>
<script src="bower_components/codemirror/addon/hint/javascript-hint.js"></script>
<script src="bower_components/codemirror/addon/fold/foldcode.js"></script>
<script src="bower_components/codemirror/addon/fold/foldgutter.js"></script>
<script src="bower_components/codemirror/addon/fold/brace-fold.js"></script>
<script src="bower_components/codemirror/addon/fold/xml-fold.js"></script>
<script src="bower_components/codemirror/addon/fold/comment-fold.js"></script>
<script src="bower_components/codemirror/addon/edit/closetag.js"></script>
<script src="bower_components/codemirror/addon/selection/active-line.js"></script>
<script src="bower_components/codemirror/addon/edit/closebrackets.js"></script>
<script src="bower_components/codemirror/addon/search/search.js"></script>
<script src="bower_components/codemirror/mode/meta.js"></script>
<script src="bower_components/codemirror/addon/mode/loadmode.js"></script>
<script src="bower_components/codemirror/addon/search/match-highlighter.js"></script>
<script src="bower_components/codemirror/mode/xml/xml.js"></script>
<script src="bower_components/codemirror/addon/display/placeholder.js"></script>
<script src="js/controllers.js"></script>
<script>

    

    app.controller('CodemirrorCtrl', ['$scope', function($scope) {

        // The modes
        $scope.modes = ['Scheme', 'XML', 'Javascript'];
        $scope.mode = $scope.modes[0];

        // The ui-codemirror option
        $scope.cmOption = {
            lineNumbers: true,
            indentWithTabs: true,
            onLoad : function(_cm){

                // HACK to have the codemirror instance in the scope...
                $scope.modeChanged = function(){
                    _cm.setOption("mode", $scope.mode.toLowerCase());
                };
            }
        };

        // Initial code content...
        $scope.cmModel = ';; Scheme code in here.\n' +
        '(define (double x)\n\t(* x x))\n\n\n' +
        '<!-- XML code in here. -->\n' +
        '<root>\n\t<foo>\n\t</foo>\n\t<bar/>\n</root>\n\n\n' +
        '// Javascript code in here.\n' +
        'function foo(msg) {\n\tvar r = Math.random();\n\treturn "" + r + " : " + msg;\n}';

    }]);
</script>

</body>
</html>